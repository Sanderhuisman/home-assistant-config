---
id: 'living_roommusic'
alias: '[Living Room] Music Switch'
description: ''
# mode: restart
mode: single
max_exceeded: silent

# variables:
#   media_player_sander: media_player.spotify_sander

trigger:
  - platform: event
    event_type: zha_event
    event_data:
      device_ieee: 14:b4:57:ff:fe:52:81:cd

condition:
  - condition: or
    conditions:
      - condition: state
        entity_id: media_player.spotify_sander
        attribute: source
        state:
          - Living Room
          - Living Room Group
          - Kitchen
          - Kitchen Group

action:
  # Debounce
  # - delay:
  #     milliseconds: 10

  # - variables:
  #   command: '{{ trigger.event.data.command }}'
  #   args: '{{ trigger.event.data.args }}'

  - choose:
      - conditions:
          - "{{ trigger.event.data.command == 'toggle' }}"

        sequence:
          - service: media_player.media_play_pause
            target:
              entity_id: media_player.spotify_sander

      - conditions:
          - "{{ trigger.event.data.command == 'step' and trigger.event.data.args == [0, 1, 0] }}"

        sequence:
          - service: media_player.media_next_track
            target:
              entity_id: media_player.spotify_sander

      # - conditions:
      #     - "{{ trigger.event.data.command == 'move' and trigger.event.data.args == [1, 195] }}"

      #   sequence:
      #     - repeat:
      #         count: 3
      #         sequence:
      #           - delay: 0.2
      #           - service: media_player.volume_down
      #             target:
      #               entity_id: media_player.spotify_sander

      # - conditions:
      #     - "{{ trigger.event.data.command == 'move' and trigger.event.data.args == [0, 195] }}"

      #   sequence:
      #     - repeat:
      #         count: 3
      #         sequence:
      #           - service: media_player.volume_up
      #             target:
      #               entity_id: media_player.spotify_sander
      #           - delay: 1
