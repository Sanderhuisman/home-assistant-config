---
alias: Vitrine Lights

trigger:
  - platform: event
    event_type: zha_event
    event_data:
      device_ieee: 60:a4:23:ff:fe:ee:dc:8f
      command: 'on'

action:
  - choose:
      # Single tap turn on
      - conditions:
          - condition: state
            state: 'idle'
            entity_id:
              - timer.vitrine_double_tap

        sequence:
          - service: light.turn_on
            entity_id: light.ikea_of_sweden_tradfri_driver_10w_a4d585fe_level_on_off
            data:
              transition: 1

          - service: timer.start
            entity_id: timer.vitrine_double_tap
            data:
              duration: '00:00:02'

      # Double tap
      - conditions:
          - condition: state
            state: 'active'
            entity_id:
              - timer.vitrine_double_tap

          - condition: state
            state: 'on'
            entity_id:
              - light.ikea_of_sweden_tradfri_driver_10w_a4d585fe_level_on_off

        sequence:
          - service: light.turn_on
            entity_id: light.ikea_of_sweden_tradfri_driver_10w_a4d585fe_level_on_off
            data:
              transition: 1
              brightness_pct: 100.0
