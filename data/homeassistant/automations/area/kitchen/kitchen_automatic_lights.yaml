---
id: 'kitchen_automatic_lights'
alias: '[Kitchen] Automatic lights'
description: ''
mode: single

trigger:
  - platform: state
    entity_id: binary_sensor.kitchen_motion_occupancy
    from: 'off'
    to: 'on'

  - platform: state
    entity_id: binary_sensor.kitchen_motion_occupancy
    from: 'on'
    to: 'off'
    for: 00:02:00

action:
  - choose:
      - conditions:
          - condition: state
            entity_id: binary_sensor.kitchen_motion_occupancy
            state: 'on'

          - condition: numeric_state
            entity_id: sensor.xiaomi_lumi_sen_ill_mgl01_illuminance
            below: '60'

        sequence:
          - service: light.turn_on
            target:
              entity_id: light.kitchen_ceiling_lights_current_value_5
            data:
              brightness_pct: 100

      - conditions:
          - condition: state
            entity_id: binary_sensor.kitchen_motion_occupancy
            state: 'off'

        sequence:
          - service: light.turn_off
            target:
              entity_id: light.kitchen_ceiling_lights_current_value_5

    default: []
