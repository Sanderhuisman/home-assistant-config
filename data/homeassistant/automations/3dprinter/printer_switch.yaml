---
id: '3d_printer_power_switch'
alias: '[3D Printer] Power Switch'
description: ''
mode: single

trigger:
  - platform: event
    event_type: zha_event
    id: zha_event_switch
    event_data:
      device_ieee: 50:32:5f:ff:fe:26:4f:02

condition: []

action:
  - variables:
      command: '{{ trigger.event.data.command }}'

  - choose:
      - conditions:
          - "{{ command == 'on' }}"

        sequence:
          - service: switch.turn_on
            target:
              entity_id: switch.printer_power

      - conditions:
          - "{{ command == 'off' }}"

          - alias: Printer inactive"
            condition: state
            entity_id: binary_sensor.octoprint_printing
            state: "off"


        sequence:
          - service: switch.turn_off
            target:
              entity_id: switch.printer_power
